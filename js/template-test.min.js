var tableData={gridHeader:[{fontName:"黑体",textAlign:"left",itemValue:"序号",fontSize:17,isShow:true},{fontName:"黑体",textAlign:"center",itemValue:"商品图片",fontSize:16,isShow:false},{fontName:"楷体",textAlign:"center",itemValue:"商品名称",fontSize:18,isShow:true},{fontName:"宋体",textAlign:"right",itemValue:"商家编码",fontSize:15,isShow:true},{fontName:"微软雅黑",textAlign:"left",itemValue:"货号",fontSize:14,isShow:true},{fontName:"黑体",textAlign:"left",itemValue:"销售属性",fontSize:12,isShow:true},{fontName:"黑体",textAlign:"left",itemValue:"单价",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"left",itemValue:"数量",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"left",itemValue:"金额",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"left",itemValue:"货位",fontSize:16,isShow:false}],gridBody:[[{fontName:"楷体",textAlign:"left",code:"1",fontSize:14,isShow:true},{fontName:"黑体",textAlign:"left",code:"<img src='images/i1.jpg'/>",fontSize:15,isShow:false},{fontName:"宋体",textAlign:"center",code:"衬衫",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"right",code:"B001",fontSize:17,isShow:true},{fontName:"微软雅黑",textAlign:"left",code:"G001",fontSize:18,isShow:true},{fontName:"黑体",textAlign:"left",code:"xxx",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"left",code:"80",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"left",code:"5",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"left",code:"400",fontSize:16,isShow:true},{fontName:"黑体",textAlign:"left",code:"no-1",fontSize:16,isShow:false}]]};var createElement=function(b,c,e){var d=document.createElement(b);if(typeof(c)==="string"){e=c;c=null}if(c!==undefined){for(var a in c){d.setAttribute(a,c[a])}}if(e!==undefined){d.innerHTML=e}return d};var renderRule=function(b,c){var h=parseInt($(b).width()/10);var d=parseInt($(b).height()/10);if($(c).find(".rules").length<=0){var g=$("<div class='rules'></div>").appendTo($(c));var f=$('<div class="rule rule-top"></div>').appendTo($(g));var e=$('<div class="rule rule-right"></div>').appendTo($(g));var a=$('<div class="rule rule-bottom"></div>').appendTo($(g));var i=$('<div class="rule rule-left"></div>').appendTo($(g))}$(".rule-top").html(createRule("top",h));$(".rule-bottom").html(createRule("bottom",h));$(".rule-left").html(createRule("left",d));$(".rule-right").html(createRule("right",d))};var createRule=function(g,c){var f=[];var b=createElement("div");switch(g){case"top":f=["height","left"];break;case"left":f=["width","top"];break;case"bottom":f=["height","left"];break;case"right":f=["width","top"];break}for(var d=0,a=c;d<=a;d++){var e=createElement("div",{"class":"rule-scale"});$(e).css(f[1],10*d+18+"px");if(d>0){if(d%5===0){$(e).css(f[0],"50%")}if(d%10===0){$(e).css(f[0],"100%").html("<span>"+d*10+"</span>")}}else{$(e).css(f[0],0)}$(e).appendTo($(b))}return b};var drag=function(a,b,c){$(a).on("mouseenter",function(){$(this).css("cursor","move")});$(a).on("mousedown",function(g){g=g||window.event;var d=a===b?this:$(this).parents(b)[0];var j=g.clientX-d.offsetLeft;var h=g.clientY-d.offsetTop;var i=parseFloat(getComputedStyle(d).width);var e=parseFloat(getComputedStyle(d).height);var k=parseFloat(getComputedStyle($(c)[0]).width);var f=parseFloat(getComputedStyle($(c)[0]).height);document.onmousemove=function(m){m=m||window.event;var l=m.clientX-j;var n=m.clientY-h;if(l<=0){l=0}else{if(l>=(k-i)){l=k-i}}if(n<=0){n=0}else{if(n>=(f-e)){n=f-e}}d.style.left=l+"px";d.style.top=n+"px"}});$(a).on("mouseup",function(){document.onmousemove=null})};var resize=function(a){$.each($(a),function(){var b="";$(this).off("click").on("click",function(){b=$(this);var d="";var e="";var f="";var c="";if(b.find(".rth").length<=0){if(f===""&&d===""&&e===""&&c===""){if(!b.parents().hasClass("move-element")){c=$('<div class="rth rth-top"   ></div>').appendTo(b);d=$('<div class="rth rth-left"  ></div>').appendTo(b);f=$('<div class="rth rth-bottom"></div>').appendTo(b)}e=$('<div class="rth rth-right" ></div>').appendTo(b);b.find(".rth").show().on("mousedown",function(l){l=l||window.event;l.stopPropagation();var k=l.currentTarget;var h=b.width();var j=b.height();var g=parseFloat(b.css("left"));var i=parseFloat(b.css("top"));var n=l.clientX;var m=l.clientY;$(document).on("mousemove",function(p){p=p||window.event;var o=p.clientX-n;var q=p.clientY-m;if($(k).hasClass("rth-right")||$(k).hasClass("rth-bottom")){b.css({width:h+o+"px",height:j+q+"px"})}else{b.css({width:h-o+"px",left:g+o+"px",height:j-q+"px",top:i+q+"px"})}})});$(document).on("mouseup",function(){$(document).off("mousemove")})}}})})};var addElement=function(){$(".add-panel .add-table").off("click").on("click",function(){addTable(tableData);resize(".move-element");panel()});$(".add-panel .add-default").off("click").on("click",function(){var a=$('<div class="div-default move-element" style="font-family: 黑体;font-size: 16px;text-align: left"><span class="default-text">【'+$(this).html()+"】</span></div>").appendTo($("#panel"));drag(a,a,"#panel");resize(".move-element");panel()});$(".add-panel .add-custom").off("click").on("click",function(){var a=$('<div class="div-custom  move-element" style="font-family: 黑体;font-size: 16px;text-align: left"><span class="custom-text">【'+$(this).html()+"】</span></div>").appendTo($("#panel"));drag(a,a,"#panel");resize(".move-element");panel()})};var addTable=function(e,d){var f=document.createDocumentFragment();var b=$('<table class="table move-element"></table>').appendTo($(f));var a=$("<tbody></tbody>").appendTo(b);var c=$('<tr class="tr"></tr>').appendTo(a);if(d!==undefined){b.css({width:d.w,height:d.h,left:d.x,top:d.y})}$.each(e.gridHeader,function(h,g){if(g.isShow){$('<th class="td" style="font-size: '+g.fontSize+"px;text-align: "+g.textAlign+";font-family: "+g.fontName+'">'+g.itemValue+"</th>").appendTo(c)}else{$('<th class="td" style="font-size: '+g.fontSize+"px;text-align: "+g.textAlign+";font-family: "+g.fontName+';display: none">'+g.itemValue+"</th>").appendTo(c)}});$.each(e.gridBody,function(h,i){var g=$('<tr class="tr"></tr>').appendTo(b);$.each(i,function(j,k){if(k.isShow){$('<td class="td" style="font-size: '+k.fontSize+"px;text-align: "+k.textAlign+";font-family: "+k.fontName+'">'+k.code+"</td>").appendTo(g)}else{$('<td class="td" style="font-size: '+k.fontSize+"px;text-align: "+k.textAlign+";font-family: "+k.fontName+';display: none">'+k.code+"</td>").appendTo(g)}})});$(f).appendTo($("#panel"));drag(".table",".table","#panel");resize(".move-element");panel()};var panel=function(){var e="";$.each($(".move-element"),function(){$(this).on("click",function(){e=$(this);e.css("background-color","#fbafa7").siblings().css("background-color","#fff").find(".rth").remove();if($(this).find("img.panel-bg").length<=0){if($(document.body).find(".edit-panel").length<=0){b(".edit-panel")}if(e.hasClass("table")){var f=[];$.each(e.find("th.td"),function(h,g){var j={};j.value=g.innerHTML;j.isShow=$(this).css("display")==="none"?false:true;f.push(j)});d(f)}else{if(e.hasClass("div-default")){c()}else{if(e.hasClass("div-custom")){a()}}}drag(".edit-panel>.title",".edit-panel",document.body);$(".edit-panel").show();$(".edit-panel .btn-delete").off("click").on("click",function(){e.remove();$(".edit-panel").remove()})}else{$(".edit-panel").remove()}})});var d=function(h){$(".edit-panel .panel-ctrl").html("");var f=createElement("div",{"class":"ctrl-item"});$(f).appendTo($(".edit-panel .panel-ctrl"));var g=$('<label class="ctrl-item-title">表列</label>').appendTo($(f));var i=createElement("div",{"class":"ctrl-item-content"});$(i).appendTo($(f));$.each(h,function(k,j){var l=$('<div class="table-item"></div>').appendTo($(i));if(j.isShow){$('<input class="table-choose" type="checkbox" checked>').appendTo(l);$('<input class="table-title" type="text" readonly value="'+j.value+'">').appendTo(l);$('<a class="table-edit">编辑</a>').appendTo(l)}else{$('<input class="table-choose" type="checkbox">').appendTo(l);$('<input class="table-title" type="text" readonly value="'+j.value+'">').appendTo(l);$('<a class="table-edit table-edit-unchecked">编辑</a>').appendTo(l)}});$.each($(".table-item input.table-choose"),function(k,j){$(this).on("click",function(){if(!this.checked){$.each(e.find(".tr"),function(){$($(this).find(".td")[k]).hide()});$(this).siblings("a.table-edit").addClass("table-edit-unchecked")}else{$.each(e.find(".tr"),function(){$($(this).find(".td")[k]).show()});$(this).siblings("a.table-edit").removeClass("table-edit-unchecked")}})});$.each($(".table-edit"),function(k,j){$(this).off("click").on("click",function(){if(!$(this).hasClass("table-edit-unchecked")){var o=[];function l(){for(var p=0;p<2;p++){var r={};var q=$(e.find(".tr")[p]).children(".td")[k];r.fontSize=$(q).css("font-size");r.fontFamily=$(q).css("font-family");r.color=$(q).css("color");r.fontWeight=q.style.fontWeight;r.fontStyle=$(q).css("font-style");r.textDecoration=$(q).css("text-decoration");r.textAlign=$(q).css("text-align");r.beforStyle=$(q).attr("style");o.push(r)}}l();if($(document.body).find(".table-ctrl").length<=0){n()}function n(){b(".table-ctrl");drag(".table-ctrl>.title",".table-ctrl",document.body);$(".table-ctrl>.title").html("修改表格样式");$(".table-ctrl>.btn-delete").remove();$('<div class="table-header"><div class="title">表头的样式</div><div class="table-style"></div></div>').appendTo($(".table-ctrl>.panel-ctrl"));$('<div class="table-body"><div class="title">表体的样式</div><div class="table-style"></div></div>').appendTo($(".table-ctrl>.panel-ctrl"));$('<div class="btns"><div class="btn-confirm">确定</div><div class="btn-cancel">取消</div></div>').appendTo($(".table-ctrl"));var p=$('<div class="ctrl-item"><label class="ctrl-item-title">字体/号</label><div class="ctrl-item-content"><select class="font-select" name="fontFamily"><option value="黑体" name="heiTi">黑体</option><option value="楷体" name="kaiTi">楷体</option><option value="宋体" name="songTi">宋体</option><option value="微软雅黑" name="yahei">微软雅黑</option></select><div class="font-size"><span class="icon-font"></span><input class="font-number" type="number" name="font-number" value="16" min="12"></div></div></div>\n<div class="ctrl-item"><label class="ctrl-item-title">粗斜体</label><div class="ctrl-item-content font-set"><div class="font-color">A<input class="color-choose" type="color"></div><div class="font-bold">B</div><div class="font-italic">I</div><div class="font-underline">U</div></div></div><div class="ctrl-item"><label class="ctrl-item-title">对齐</label><div class="ctrl-item-content text-align"><div class="text-left"></div><div class="text-center"></div><div class="text-right"></div></div></div>');p.appendTo($(".table-style"))}m(o);function m(r){function p(s){var t=s===".table-header"?0:1;$.each($(s+" .font-select option"),function(u,v){if(v.innerHTML===r[t].fontFamily){this.selected=true}});$(s+" .font-number").val(parseInt(r[t].fontSize));switch(r[t].textAlign){case"left":$($(s+" .text-align>div")[0]).addClass("active").siblings().removeClass("active");break;case"center":$($(s+" .text-align>div")[1]).addClass("active").siblings().removeClass("active");break;case"right":$($(s+" .text-align>div")[2]).addClass("active").siblings().removeClass("active");break}$(s+" .font-color").css("color",r[t].color);r[t].fontWeight==="bold"?$(s+" .font-bold").addClass("active"):$(s+" .font-bold").removeClass("active");r[t].fontStyle==="italic"?$(s+" .font-italic").addClass("active"):$(s+" .font-italic").removeClass("active");r[t].textDecoration.indexOf("underline")>-1?$(s+" .font-underline").addClass("active"):$(s+" .font-underline").removeClass("active")}p(".table-header");p(".table-body");function q(){$(".table-header .font-select").off("change").on("change",function(){e.find("th.td")[k].style.fontFamily=$(this).val()});$(".table-body .font-select").off("change").on("change",function(){var s=$(this).val();$.each(e.find(".tr"),function(t,u){if(t>0){$(this).find("td.td")[k].style.fontFamily=s}})});$(".table-header .font-number").off("change").on("change",function(){e.find("th.td")[k].style.fontSize=$(this).val()+"px"});$(".table-body .font-number").off("change").on("change",function(){var s=$(this).val()+"px";$.each(e.find(".tr"),function(t,u){if(t>0){$(this).find("td.td")[k].style.fontSize=s}})});$(".table-header .color-choose").off("change").on("change",function(){e.find("th.td")[k].style.color=$(this).val();$(this).parents(".font-color").css("color",$(this).val())});$(".table-body .color-choose").off("change").on("change",function(){$(this).parents(".font-color").css("color",$(this).val());var s=$(this).val();$.each(e.find(".tr"),function(t,u){if(t>0){$(this).find("td.td")[k].style.color=s}})});$(".table-header .font-bold").off("click").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?$(e.find("th.td")[k]).css("font-weight","bold"):$(e.find("th.td")[k]).css("font-weight","normal")});$(".table-body .font-bold").off("click").on("click",function(){var s=$(this);s.toggleClass("active");$.each(e.find(".tr"),function(t,u){if(t>0){s.hasClass("active")?$($(this).find("td.td")[k]).css("font-weight","bold"):$($(this).find("td.td")[k]).css("font-weight","normal")}})});$(".table-header .font-italic").off("click").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?$(e.find("th.td")[k]).css("font-style","italic"):$(e.find("th.td")[k]).css("font-style","normal")});$(".table-body .font-italic").off("click").on("click",function(){var s=$(this);s.toggleClass("active");$.each(e.find(".tr"),function(t,u){if(t>0){s.hasClass("active")?$($(this).find("td.td")[k]).css("font-style","italic"):$($(this).find("td.td")[k]).css("font-style","normal")}})});$(".table-header .font-underline").off("click").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?$(e.find("th.td")[k]).css("text-decoration","underline"):$(e.find("th.td")[k]).css("text-decoration","none")});$(".table-body .font-underline").off("click").on("click",function(){var s=$(this);s.toggleClass("active");$.each(e.find(".tr"),function(t,u){if(t>0){s.hasClass("active")?$($(this).find("td.td")[k]).css("text-decoration","underline"):$($(this).find("td.td")[k]).css("text-decoration","none")}})});$(".table-header .text-align>div").off("click").on("click",function(){var s=$(this).index();$(this).addClass("active").siblings().removeClass("active");switch(s){case 0:$(e.find("th.td")[k]).css("text-align","left");break;case 1:$(e.find("th.td")[k]).css("text-align","center");break;case 2:$(e.find("th.td")[k]).css("text-align","right");break}});$(".table-body .text-align>div").off("click").on("click",function(){var s=$(this);var t=$(this).index();$(this).addClass("active").siblings().removeClass("active");$.each(e.find(".tr"),function(u,v){if(u>0){switch(t){case 0:$($(this).find("td.td")[k]).css("text-align","left");break;case 1:$($(this).find("td.td")[k]).css("text-align","center");break;case 2:$($(this).find("td.td")[k]).css("text-align","right");break}}})})}q()}$(".table-ctrl .btn-confirm").off("click").on("click",function(){$(".table-ctrl").remove()});$(".table-ctrl .btn-cancel").off("click").on("click",function(){$(".table-ctrl").remove();$(e.find(".tr")[0]).children(".td")[k].style=o[0].beforStyle;$.each(e.find(".tr"),function(p,q){if(p>0){$(this).find(".td")[k].style=o[1].beforStyle}})})}})})};var c=function(){$(".edit-panel .panel-ctrl").html("");var i={};i.fontSize=e.css("font-size");i.fontFamily=e.css("font-family");i.color=e.css("color");i.fontWeight=e[0].style.fontWeight;i.fontStyle=e.css("font-style");i.textDecoration=e.css("text-decoration");i.textAlign=e.css("text-align");i.beforStyle=e.attr("style");var f=$('<div class="ctrl-item"><label class="ctrl-item-title">字体/号</label><div class="ctrl-item-content"><select class="font-select" name="fontFamily"><option value="黑体" name="heiTi">黑体</option><option value="楷体" name="kaiTi">楷体</option><option value="宋体" name="songTi">宋体</option><option value="微软雅黑" name="yahei">微软雅黑</option></select><div class="font-size"><span class="icon-font"></span><input class="font-number" type="number" name="font-number" value="16" min="12"></div></div></div>\n<div class="ctrl-item"><label class="ctrl-item-title">粗斜体</label><div class="ctrl-item-content font-set"><div class="font-color">A<input class="color-choose" type="color"></div><div class="font-bold">B</div><div class="font-italic">I</div><div class="font-underline">U</div></div></div><div class="ctrl-item"><label class="ctrl-item-title">对齐</label><div class="ctrl-item-content text-align"><div class="text-left"></div><div class="text-center"></div><div class="text-right"></div></div></div>');f.appendTo($(".edit-panel .panel-ctrl"));g();function g(){$.each($(".font-select option"),function(k,j){if(j.innerHTML===i.fontFamily){this.selected=true}});$(".font-number").val(parseInt(i.fontSize));switch(i.textAlign){case"left":$($(".text-align>div")[0]).addClass("active").siblings().removeClass("active");break;case"center":$($(".text-align>div")[1]).addClass("active").siblings().removeClass("active");break;case"right":$($(".text-align>div")[2]).addClass("active").siblings().removeClass("active");break}$(".font-color").css("color",i.color);i.fontWeight==="bold"?$(".font-bold").addClass("active"):$(".font-bold").removeClass("active");i.fontStyle==="italic"?$(".font-italic").addClass("active"):$(".font-italic").removeClass("active");i.textDecoration.indexOf("underline")>-1?$(".font-underline").addClass("active"):$(".font-underline").removeClass("active")}h();function h(){$(".font-select").off("change").on("change",function(){e[0].style.fontFamily=$(this).val()});$(".font-number").off("change").on("change",function(){e[0].style.fontSize=$(this).val()+"px"});$(".color-choose").off("change").on("change",function(){e[0].style.color=$(this).val();$(this).parents(".font-color").css("color",$(this).val())});$(".font-bold").off("click").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?$(e).css("font-weight","bold"):$(e).css("font-weight","normal")});$(".font-italic").off("click").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?$(e).css("font-style","italic"):$(e).css("font-style","normal")});$(".font-underline").off("click").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?$(e).css("text-decoration","underline"):$(e).css("text-decoration","none")});$(".text-align>div").off("click").on("click",function(){var j=$(this).index();$(this).addClass("active").siblings().removeClass("active");switch(j){case 0:$(e).css("text-align","left");break;case 1:$(e).css("text-align","center");break;case 2:$(e).css("text-align","right");break}})}};var a=function(){var f=e.text();c();$('<div class="ctrl-item"><label class="ctrl-item-title">文字项目</label><div class="ctrl-item-content"><input class="custom-content" type="text" value="'+f+'"></div></div>').appendTo($(".edit-panel .panel-ctrl"));$(".edit-panel .custom-content").on("input",function(){e.find(".custom-text").text($(this).val())})};var b=function(g){var h=document.createDocumentFragment();var f=createElement("div",{"class":g.split(".")[1]});$(f).appendTo($(h));$('<div class="title">打印项目编辑</div>').appendTo($(f));$(createElement("div",{"class":"panel-ctrl"})).appendTo($(f));$('<div class="btn-delete">删除打印项目</div>').appendTo($(f));$(h).appendTo($(document.body))}};var Xedit=function(){this.elem="";this.init=function(c,a,b){$(c).html("");this.elem=c;a=a?a:$(c).width();b=b?b:$(c).height();$(c).css({position:"relative",width:a,height:b,padding:"18px",border:"1px solid #ccc",overflow:"hidden"});$('<div id="stage"><div id="panel"></div></div>').appendTo($(c));renderRule("#panel",c);xedit.addPanel();addElement();panel();resize(".move-element");$.each($("#panel .move-element"),function(){drag(this,this,"#panel")});drag(".table-ctrl>.title",".table-ctrl",document.body);drag(".add-panel>.title",".add-panel",document.body)};this.addPanel=function(){if($(document.body).find(".add-panel").length<=0){var b=$('<div class="add-panel"><div class="title">打印项目添加</div></div>').appendTo($(document.body));var a=$('<div class="add-ctrl"></div>').appendTo(b);$('<div class="ctrl-item add-table">添加一个表格</div>').appendTo(a);$('<div class="ctrl-item add-custom">自定义文字</div>').appendTo(a);$('<div class="ctrl-item add-default">收货人-姓名</div>').appendTo(a)}};this.get=function(){var a={};a.panel={width:$(this.elem)[0].offsetWidth,height:$(this.elem)[0].offsetHeight};a.elements=[];$.each($("#panel .move-element"),function(){$(this).css("background-color","#fff");$(this).find(".rth").remove();var c={};c.x=this.offsetLeft;c.y=this.offsetTop;c.w=this.offsetWidth;c.h=this.offsetHeight;c.style=$(this).attr("style");c.code="";if($(this).hasClass("table")){c.type="table";c.tableData={};var b=[];var d=[];$.each($(this).find("th.td"),function(){var e={};e.style=$(this).attr("style");e.value=this.innerHTML;if(this.style.display!=="none"){e.isShow=true}else{e.isShow=false}b.push(e)});$.each($($(this).find(".tr")),function(g,f){if(g>0){var e=[];$.each($(f).find("td.td"),function(){var h={};h.style=$(this).attr("style");h.value=this.innerHTML;h.code="";if(this.style.display!=="none"){h.isShow=true}else{h.isShow=false}e.push(h)});d.push(e)}});c.tableData.gridHeader=b;c.tableData.gridBody=d;a.elements.push(c)}else{if($(this).hasClass("div-default")){c.type="label";c.value=$(this).children(".default-text").text();a.elements.push(c)}else{if($(this).hasClass("div-custom")){c.type="xlabel";c.value=$(this).children(".custom-text").text();a.elements.push(c)}}}});$(".edit-panel").remove();return a};this.setWidth=function(a){$(this.elem).css("width",a);renderRule("#panel",this.elem)};this.setHeight=function(a){$(this.elem).css("height",a);renderRule("#panel",this.elem)};this.setDatas=function(a){$("#panel").html("");$(".edit-panel").remove();this.setWidth(a.panel.width);this.setHeight(a.panel.height);$.each(a.elements,function(c,b){switch(b.type){case"label":var d=$('<div class="div-default move-element" style="'+b.style+'"><span class="default-text">【'+b.code+"】</span></div>").appendTo($("#panel"));break;case"xlabel":var d=$('<div class="div-custom move-element"  style="'+b.style+'"><span class="custom-text">【'+b.code+"】</span></div>").appendTo($("#panel"));break;case"table":addTable(b.tableData,b);break}d!==undefined&&d.css({width:b.w,height:b.h,left:b.x,top:b.y});drag(d,d,"#panel");resize(".move-element");panel()})};this.setImg=function(a){if($("#panel").find(".panel-bg").length<=0){var b=$('<div class="move-element"><img class="panel-bg" alt=""></div>').appendTo($("#panel"));b.css("z-index",0);drag(b,b,"#panel");resize(".move-element");panel()}$(".panel-bg").attr("src",a)};this.addTable=function(a){addTable(a);resize(".move-element");panel()};this.addDefault=function(a){var b=$('<div class="div-default move-element"><span class="default-text">【'+a+"】</span></div>").appendTo($("#panel"));drag(b,b,"#panel");resize(".move-element");panel()};this.addCustom=function(a){var b=$('<div class="div-custom move-element"><span class="custom-text">【'+a+"】</span></div>").appendTo($("#panel"));drag(b,b,"#panel");resize(".move-element");panel()}};var xedit=new Xedit();